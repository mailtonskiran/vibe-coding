<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mutual Fund Portfolio Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        h3 {
            color: #495057;
            margin-top: 30px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .form-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 25px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .form-table thead th {
            background-color: #007bff;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 16px;
        }
        
        .form-table tbody td {
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
            vertical-align: middle;
        }
        
        .form-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        .form-table tbody tr:hover {
            background-color: #f8f9fa;
        }
        
        .form-table label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 0;
        }
        
        .form-table input, .form-table select, .form-table textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-table input:focus, .form-table select:focus, .form-table textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }
        
        .submit-section {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .investors-list {
            margin-top: 30px;
        }
        .investor-card {
            background-color: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #007bff;
        }
        .message {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .recommendation-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        .recommendation-table th, .recommendation-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .recommendation-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        .recommendations-container h4 {
            margin-top: 20px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }
        .recommendations-container h5 {
            margin-top: 15px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mutual Fund Portfolio Management System</h1>
        
        <h2>Investor Financial Assessment</h2>
        <form id="investorForm">
            <table class="form-table">
                <thead>
                    <tr>
                        <th colspan="4">Personal Information</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="name">Full Name:</label></td>
                        <td><input type="text" id="name" name="name" required></td>
                        <td><label for="email">Email:</label></td>
                        <td><input type="email" id="email" name="email" required></td>
                    </tr>
                    <tr>
                        <td><label for="age">Age:</label></td>
                        <td><input type="number" id="age" name="age" min="18" max="100" required></td>
                        <td><label for="education_level">Education Level:</label></td>
                        <td>
                            <select id="education_level" name="education_level" required>
                                <option value="">Select Education Level</option>
                                <option value="High School">High School</option>
                                <option value="Some College">Some College</option>
                                <option value="Graduate">Graduate</option>
                                <option value="Post Graduate">Post Graduate</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><label for="occupation_type">Occupation Type:</label></td>
                        <td>
                            <select id="occupation_type" name="occupation_type" required>
                                <option value="">Select Occupation Type</option>
                                <option value="Self Employed">Self Employed</option>
                                <option value="Business">Business</option>
                                <option value="Salaried-Govt">Salaried - Government</option>
                                <option value="Salaried-Private">Salaried - Private</option>
                                <option value="Retired">Retired</option>
                            </select>
                        </td>
                        <td><label for="annual_income_range">Annual Income Range:</label></td>
                        <td>
                            <select id="annual_income_range" name="annual_income_range" required>
                                <option value="">Select Income Range</option>
                                <option value="Below 3 Lakhs">Below ₹3 Lakhs</option>
                                <option value="3-6 Lakhs">₹3-6 Lakhs</option>
                                <option value="6-10 Lakhs">₹6-10 Lakhs</option>
                                <option value="10-15 Lakhs">₹10-15 Lakhs</option>
                                <option value="15-25 Lakhs">₹15-25 Lakhs</option>
                                <option value="Above 25 Lakhs">Above ₹25 Lakhs</option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <table class="form-table">
                <thead>
                    <tr>
                        <th colspan="4">Financial Information</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="monthly_income">Monthly Income (₹):</label></td>
                        <td><input type="number" id="monthly_income" name="monthly_income" min="0" step="1000" required></td>
                        <td><label for="monthly_expenses">Monthly Expenses (₹):</label></td>
                        <td><input type="number" id="monthly_expenses" name="monthly_expenses" min="0" step="1000" required></td>
                    </tr>
                    <tr>
                        <td><label for="existing_assets">Existing Assets (₹):</label></td>
                        <td><input type="number" id="existing_assets" name="existing_assets" min="0" step="10000" required></td>
                        <td><label for="existing_liabilities">Existing Liabilities (₹):</label></td>
                        <td><input type="number" id="existing_liabilities" name="existing_liabilities" min="0" step="10000" required></td>
                    </tr>
                    <tr>
                        <td><label for="emergency_fund">Emergency Fund (₹):</label></td>
                        <td><input type="number" id="emergency_fund" name="emergency_fund" min="0" step="5000" required></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
            
            <table class="form-table">
                <thead>
                    <tr>
                        <th colspan="4">Investment Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="investment_amount">Investment Amount (₹):</label></td>
                        <td><input type="number" id="investment_amount" name="investment_amount" min="1000" step="1000" required></td>
                        <td><label for="required_return">Expected Return (%):</label></td>
                        <td><input type="number" id="required_return" name="required_return" min="5" max="30" step="0.5" required></td>
                    </tr>
                    <tr>
                        <td><label for="investment_horizon">Time Horizon:</label></td>
                        <td>
                            <select id="investment_horizon" name="investment_horizon" required>
                                <option value="">Select Time Horizon</option>
                                <option value="Short">Short Term (1-3 years)</option>
                                <option value="Medium">Medium Term (3-7 years)</option>
                                <option value="Long">Long Term (7+ years)</option>
                            </select>
                        </td>
                        <td><label for="equity_experience">Equity Experience:</label></td>
                        <td>
                            <select id="equity_experience" name="equity_experience" required>
                                <option value="">Select Experience</option>
                                <option value="None">None</option>
                                <option value="Less than 3 years">Less than 3 years</option>
                                <option value="More than 3 years">More than 3 years</option>
                            </select>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <table class="form-table">
                <thead>
                    <tr>
                        <th colspan="4">Goals & Risk Assessment Questionnaire</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="financial_goals">1. What are your primary financial goals?</label></td>
                        <td colspan="3">
                            <textarea id="financial_goals" name="financial_goals" rows="2" placeholder="e.g., Retirement, Child's Education, Wealth Creation" required></textarea>
                        </td>
                    </tr>
                    <!-- Risk Question 1 -->
                    <tr>
                        <td><label for="risk_q1">2. What is your primary objective for this investment?</label></td>
                        <td colspan="3">
                            <select id="risk_q1" name="risk_q1" required>
                                <option value="">Select an option</option>
                                <option value="A">Capital Preservation: I want to protect my initial investment.</option>
                                <option value="B">Income Generation: I need regular income from my investments.</option>
                                <option value="C">Capital Appreciation: I want my investment to grow over time.</option>
                                <option value="D">Aggressive Growth: I am seeking high returns, and I'm comfortable with high risk.</option>
                            </select>
                        </td>
                    </tr>
                    <!-- Risk Question 2 -->
                    <tr>
                        <td><label for="risk_q2">3. How would you react to a 20% drop in your portfolio's value in a single year?</label></td>
                        <td colspan="3">
                            <select id="risk_q2" name="risk_q2" required>
                                <option value="">Select an option</option>
                                <option value="A">Sell all my holdings to prevent further loss.</option>
                                <option value="B">Sell some of my holdings.</option>
                                <option value="C">Hold my positions and wait for the market to recover.</option>
                                <option value="D">Invest more, as it's a good buying opportunity.</option>
                            </select>
                        </td>
                    </tr>
                    <!-- Add remaining risk questions here -->
                    <tr>
                        <td><label for="risk_q3">4. How familiar are you with investment products like mutual funds and stocks?</label></td>
                        <td colspan="3"><select id="risk_q3" name="risk_q3" required><option value="">Select...</option><option value="A">Not familiar at all.</option><option value="B">Somewhat familiar.</option><option value="C">Quite familiar.</option><option value="D">Very familiar, I invest regularly.</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q4">5. What is your investment horizon for the majority of your portfolio?</label></td>
                        <td colspan="3"><select id="risk_q4" name="risk_q4" required><option value="">Select...</option><option value="A">Less than 1 year.</option><option value="B">1 to 3 years.</option><option value="C">3 to 7 years.</option><option value="D">More than 7 years.</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q5">6. What percentage of your income are you willing to invest?</label></td>
                        <td colspan="3"><select id="risk_q5" name="risk_q5" required><option value="">Select...</option><option value="A">Less than 5%</option><option value="B">5% to 10%</option><option value="C">10% to 20%</option><option value="D">More than 20%</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q6">7. How stable is your current and future income?</label></td>
                        <td colspan="3"><select id="risk_q6" name="risk_q6" required><option value="">Select...</option><option value="A">Very unstable.</option><option value="B">Somewhat unstable.</option><option value="C">Fairly stable.</option><option value="D">Very stable.</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q7">8. How do you feel about taking financial risks?</label></td>
                        <td colspan="3"><select id="risk_q7" name="risk_q7" required><option value="">Select...</option><option value="A">I am a risk avoider.</option><option value="B">I am willing to take small risks with small parts of my portfolio.</option><option value="C">I am willing to take significant risks for significant returns.</option><option value="D">I am a risk taker and enjoy it.</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q8">9. If you had to choose between a certain gain of ₹5,000 and a 50% chance to gain ₹12,000, which would you pick?</label></td>
                        <td colspan="3"><select id="risk_q8" name="risk_q8" required><option value="">Select...</option><option value="A">The certain ₹5,000 gain.</option><option value="B">I'm indifferent.</option><option value="C">The 50% chance to gain ₹12,000.</option><option value="D">Definitely the 50% chance.</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q9">10. How quickly do you need access to the money you are investing?</label></td>
                        <td colspan="3"><select id="risk_q9" name="risk_q9" required><option value="">Select...</option><option value="A">Immediately (within 1 year).</option><option value="B">In the short term (1-3 years).</option><option value="C">In the medium term (3-7 years).</option><option value="D">In the long term (7+ years).</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q10">11. What is your outstanding debt (excluding home loan) to annual income ratio?</label></td>
                        <td colspan="3"><select id="risk_q10" name="risk_q10" required><option value="">Select...</option><option value="A">More than 50%</option><option value="B">25% to 50%</option><option value="C">10% to 25%</option><option value="D">Less than 10%</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="risk_q11">12. Which of these statements best describes your investment philosophy?</label></td>
                        <td colspan="3"><select id="risk_q11" name="risk_q11" required><option value="">Select...</option><option value="A">"Don't lose money."</option><option value="B">"A bird in the hand is worth two in the bush."</option><option value="C">"To get rich, you have to be making money while you're asleep."</option><option value="D">"The biggest risk is not taking any risk."</option></select></td>
                    </tr>
                     <tr>
                        <td><label for="risk_q12">13. How would you describe your knowledge of financial markets?</label></td>
                        <td colspan="3"><select id="risk_q12" name="risk_q12" required><option value="">Select...</option><option value="A">Beginner</option><option value="B">Intermediate</option><option value="C">Advanced</option><option value="D">Expert</option></select></td>
                    </tr>
                </tbody>
            </table>
            <table class="form-table">
                <thead>
                    <tr>
                        <th colspan="4">Additional Profile Questions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><label for="profile_q1">1. My friends would describe me as a cautious person.</label></td>
                        <td colspan="3"><select id="profile_q1" name="profile_q1" required><option value="">Select...</option><option value="A">Strongly Agree</option><option value="B">Agree</option><option value="C">Disagree</option><option value="D">Strongly Disagree</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="profile_q2">2. I prefer predictable outcomes over unpredictable ones.</label></td>
                        <td colspan="3"><select id="profile_q2" name="profile_q2" required><option value="">Select...</option><option value="A">Strongly Agree</option><option value="B">Agree</option><option value="C">Disagree</option><option value="D">Strongly Disagree</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="profile_q3">3. I am more concerned with potential gains than potential losses.</label></td>
                        <td colspan="3"><select id="profile_q3" name="profile_q3" required><option value="">Select...</option><option value="A">Strongly Disagree</option><option value="B">Disagree</option><option value="C">Agree</option><option value="D">Strongly Agree</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="profile_q4">4. I have made risky decisions in the past and was comfortable with them.</label></td>
                        <td colspan="3"><select id="profile_q4" name="profile_q4" required><option value="">Select...</option><option value="A">Strongly Disagree</option><option value="B">Disagree</option><option value="C">Agree</option><option value="D">Strongly Agree</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="profile_q5">5. I am willing to risk a portion of my capital for higher returns.</label></td>
                        <td colspan="3"><select id="profile_q5" name="profile_q5" required><option value="">Select...</option><option value="A">Strongly Disagree</option><option value="B">Disagree</option><option value="C">Agree</option><option value="D">Strongly Agree</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="profile_q6">6. Financial security is more important to me than growing my wealth quickly.</label></td>
                        <td colspan="3"><select id="profile_q6" name="profile_q6" required><option value="">Select...</option><option value="A">Strongly Agree</option><option value="B">Agree</option><option value="C">Disagree</option><option value="D">Strongly Disagree</option></select></td>
                    </tr>
                    <tr>
                        <td><label for="profile_q7">7. I am confident in my ability to make good financial decisions.</label></td>
                        <td colspan="3"><select id="profile_q7" name="profile_q7" required><option value="">Select...</option><option value="A">Strongly Disagree</option><option value="B">Disagree</option><option value="C">Agree</option><option value="D">Strongly Agree</option></select></td>
                    </tr>
                </tbody>
            </table>
            <div class="submit-section">
                <button type="submit">Complete Assessment & Get Recommendations</button>
            </div>
        </form>

        <hr style="margin: 40px 0;">

        <h2>Registered Investors</h2>
        <div class="submit-section" style="text-align: left; padding: 0; margin-bottom: 20px;">
            <button id="refreshInvestorsBtn">Refresh List</button>
        </div>
        <div id="investorsList"></div>
        <div id="recommendationsResult" style="display:none;"></div>

        <div id="message"></div>
        

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const investorForm = document.getElementById('investorForm');
            const messageDiv = document.getElementById('message'); // Use the existing message div
            const investorsListDiv = document.getElementById('investorsList');
            const refreshButton = document.getElementById('refreshInvestorsBtn');

            // --- Function to Load and Display Investors ---
            function loadInvestors() {
                fetch('/api/investors')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(investors => {
                    investorsListDiv.innerHTML = ''; // Clear previous list
                    if (investors.length === 0) {
                        investorsListDiv.innerHTML = '<p>No investors registered yet.</p>';
                        return;
                    }
                    investors.forEach(investor => {
                        const investorCard = document.createElement('div');
                        investorCard.className = 'investor-card';
                        investorCard.innerHTML = `
                            <h3>${investor.name} (${investor.age} years)</h3>
                            <p><strong>Email:</strong> ${investor.email}</p>
                            <p><strong>Risk Tolerance:</strong> ${investor.risk_tolerance}</p>
                            <p><strong>Risk Category:</strong> ${investor.risk_category} (${investor.risk_category_code})</p>
                            <button class="recommendation-btn" data-investor-id="${investor.id}">Get Detailed Recommendations</button>
                        `;
                        investorsListDiv.appendChild(investorCard);
                    });
                })
                .catch(error => {
                    investorsListDiv.innerHTML = `<p class="error">Error loading investors: ${error.message}</p>`;
                });
            }

            // --- Function to Get and Display Recommendations ---
            function getRecommendations(investorId) {
                const resultDiv = document.getElementById('recommendationsResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = '<p>Fetching recommendations...</p>'; // Use innerHTML for rendering HTML

                fetch(`/api/recommendations/${investorId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        throw new Error(data.error);
                    }

                    // Helper to format numbers with commas for Indian locale
                    const formatNumber = (num) => num.toLocaleString('en-IN');

                    // Build HTML content
                    let htmlContent = `<h4>Comprehensive Analysis for ${data.investor_profile.name}</h4>`;

                    // --- Risk Profile Table ---
                    htmlContent += `<h5>Risk Profile</h5>
                    <table class="recommendation-table">
                        <tr><th>Metric</th><th>Value</th></tr>
                        <tr><td>Risk Score</td><td>${data.risk_assessment.risk_score}/480</td></tr>
                        <tr><td>Demographic Score</td><td>${data.risk_assessment.demographic_score}/7</td></tr>
                        <tr><td>Combined Score</td><td>${data.risk_assessment.combined_score}</td></tr>
                        <tr><td>Assigned Risk Category</td><td>${data.risk_assessment.risk_category} (${data.risk_assessment.risk_category_code})</td></tr>
                    </table>`;

                    // --- Asset Allocation Table ---
                    htmlContent += `<h5>Recommended Asset Allocation (Total Investment: ₹${formatNumber(data.asset_allocation.total_investment)})</h5>
                    <table class="recommendation-table">
                        <tr><th>Asset Class</th><th>Allocation (%)</th><th>Amount (₹)</th></tr>`;
                    for (const [assetClass, percent] of Object.entries(data.asset_allocation.strategy)) {
                        const amount = data.asset_allocation.amounts[assetClass] || 0;
                        const formattedAssetClass = assetClass.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                        htmlContent += `<tr>
                            <td>${formattedAssetClass}</td>
                            <td>${percent}%</td>
                            <td>₹${formatNumber(amount)}</td>
                        </tr>`;
                    }
                    htmlContent += `</table>`;

                    // --- Fund Recommendations Table ---
                    htmlContent += `<h5>Fund Recommendations</h5>`;
                    if (data.recommendations.length === 0) {
                        htmlContent += '<p>No suitable funds found for this profile.</p>';
                    } else {
                        htmlContent += `<table class="recommendation-table">
                            <tr><th>Asset Class</th><th>Fund Name</th><th>Recommended Investment (₹)</th><th>Expected Return (%)</th></tr>`;
                        let totalRecommendedInvestment = 0;
                        data.recommendations.forEach(rec => {
                            totalRecommendedInvestment += rec.recommended_investment;
                            htmlContent += `<tr>
                                <td>${rec.asset_class}</td>
                                <td>${rec.fund_name}</td>
                                <td>₹${formatNumber(rec.recommended_investment)}</td>
                                <td>${rec.expected_return}%</td>
                            </tr>`;
                        });
                        // Add a total row for verification
                        htmlContent += `<tr>
                                <td colspan="2" style="font-weight:bold; text-align:right;">Total Recommended Investment:</td>
                                <td style="font-weight:bold;">₹${formatNumber(totalRecommendedInvestment)}</td>
                                <td></td>
                            </tr>`;
                        htmlContent += `</table>`;
                    }

                    resultDiv.innerHTML = htmlContent;
                })
                .catch(error => {
                    resultDiv.innerHTML = `<p class="error">Error getting recommendations: ${error.message}</p>`;
                });
            }

            // --- Handle Form Submission ---
            investorForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                messageDiv.innerHTML = '';
                messageDiv.className = '';

                const formData = new FormData(investorForm);
                const data = Object.fromEntries(formData.entries());
                data['risk_q1_reason'] = data['risk_q1_reason'] || '';
                data['risk_q8_reason'] = data['risk_q8_reason'] || '';

                try {
                    const response = await fetch('/api/investors', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data),
                    });
                    const result = await response.json();

                    if (response.ok) {
                        messageDiv.className = 'message success';
                        messageDiv.textContent = 'Success! Investor profile created.';
                        investorForm.reset();
                        loadInvestors(); // Refresh the list
                    } else {
                        messageDiv.className = 'message error';
                        messageDiv.textContent = `Error: ${result.error || 'Failed to create investor.'}`;
                    }
                } catch (error) {
                    messageDiv.className = 'message error';
                    messageDiv.textContent = `Network Error: ${error.message}`;
                }
            });

            // --- Event Listeners ---
            refreshButton.addEventListener('click', loadInvestors);
            investorsListDiv.addEventListener('click', function(e) {
                if (e.target && e.target.classList.contains('recommendation-btn')) {
                    const investorId = e.target.getAttribute('data-investor-id');
                    getRecommendations(investorId);
                }
            });

            // --- Initial Load ---
            loadInvestors();
        });
    </script>
</body>
</html>
